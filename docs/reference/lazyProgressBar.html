<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Progress bar with customisable estimated remaining time — lazyProgressBar • lazybar</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Progress bar with customisable estimated remaining time — lazyProgressBar" />
<meta property="og:description" content="Display a progress bar displaying the estimated time.
The purpose of having various estimation methods is to
provide a more accurate estimation when the run time between
ticks is assumed to be different, e.g., online estimation,
time series cross validation, expanding window approach, etc." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129140417-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129140417-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lazybar</a>
        <span class="version label label-warning" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/FinYang/lazybar/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Progress bar with customisable estimated remaining time</h1>
    <small class="dont-index">Source: <a href='https://github.com/FinYang/lazybar/blob/master/R/LazyBar.R'><code>R/LazyBar.R</code></a></small>
    <div class="hidden name"><code>lazyProgressBar.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Display a progress bar displaying the estimated time.
The purpose of having various estimation methods is to
provide a more accurate estimation when the run time between
ticks is assumed to be different, e.g., online estimation,
time series cross validation, expanding window approach, etc.</p>
    </div>

    <pre class="usage"><span class='fu'>lazyProgressBar</span>(<span class='no'>n</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"average"</span>, <span class='kw'>fn</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>n</th>
      <td><p>Integer. Total number of ticks</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Character. The embedded forecasting method of remaining time:
<code>drift</code> (default), <code>average</code>, <code>naive</code>, or <code>snaive</code>.
Ignored if <code>fn</code> is not <code>NULL</code>.</p><dl'>
<dt><code>average</code> (default)</dt><dd><p>Average method. The run time between future ticks are assumed to
be the average run time of the past ticks.
This is the most common estimation method for remaining time.</p></dd>
<dt><code>drift</code></dt><dd><p>Drift method. The run time between future ticks are
assumed to increase (decrease), and the level changed is set to be the average change
of the run time of the past ticks.
This is to assume the run time between ticks is linearly increasing or decreasing.</p></dd>
<dt><code>naive</code></dt><dd><p>Naive method. The run time between future ticks are assumed to be
the run time between the last two ticks,</p></dd>
<dt><code>snaive</code></dt><dd><p>Seasonal naive method. If this method is chosen, an argument of <code>s</code>
needs to be supplied in the <code>...</code>.
The run time between future ticks is set to be the run time <code>s</code> times before.
By default <code>s</code> is set to be 1/10 of the total number of ticks.</p></dd>

</dl></td>
    </tr>
    <tr>
      <th>fn</th>
      <td><p>Function. User defined function to estimate the remaining time.
The function should predict the remaining time using the arguments and
return a scalar.
It should have at least three arguments in the order of <code>dtime</code>, <code>i</code>, and <code>n</code>,
which represent the status of the progress bar at the current tick:</p><dl'>
<dt><code>dtime</code></dt><dd><p>A numeric vector of the run time between past ticks.</p></dd>
<dt><code>i</code></dt><dd><p>The number of the current tick.</p></dd>
<dt><code>n</code></dt><dd><p>The number of total ticks.</p></dd>

</dl></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other arguments to pass to estimation method.
The arguments need to be named.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An R6 object with methods <code>tick()</code> and <code><a href='https://rdrr.io/r/base/print.html'>print()</a></code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Four simple forecasting methods are available for
the estimation of the remaining time:
Average method (default), Drift method, Naive method and
Seasonal naive method.
For the summary of the simple methods, see Chapter 3 of <code>References</code>.
User can also supply their customised estimation method as a function.
See <code>Arguments</code> and <code>Examples</code>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Hyndman, R.J., &amp; Athanasopoulos, G. (2018) Forecasting: principles and practice, 2nd edition, OTexts: Melbourne, Australia. OTexts.com/fpp2. Accessed on 24/04/2020.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='no'>pb</span> <span class='kw'>&lt;-</span> <span class='fu'>lazyProgressBar</span>(<span class='fl'>4</span>)
<span class='no'>pb</span>$<span class='fu'>tick</span>()
<span class='no'>pb</span>$<span class='fu'>tick</span>()
<span class='no'>pb</span>$<span class='fu'>tick</span>()
<span class='no'>pb</span>$<span class='fu'>tick</span>()

<span class='co'># With linearly increasing run time</span>
<span class='no'>pb</span> <span class='kw'>&lt;-</span> <span class='fu'>lazyProgressBar</span>(<span class='fl'>4</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"drift"</span>)
<span class='kw'>for</span>(<span class='no'>i</span> <span class='kw'>in</span> <span class='fl'>1</span>:<span class='fl'>4</span>){
  <span class='fu'><a href='https://rdrr.io/r/base/Sys.sleep.html'>Sys.sleep</a></span>(<span class='no'>i</span> * <span class='fl'>0.2</span>)
  <span class='no'>pb</span>$<span class='fu'>tick</span>()$<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>()
}

<span class='co'># With user defined forecast function</span>
<span class='co'># The forecast function itself will</span>
<span class='co'># require certain computational power</span>
<span class='no'>forecast_fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>dtime</span>, <span class='no'>i</span>, <span class='no'>n</span>, <span class='no'>s</span> <span class='kw'>=</span> <span class='fl'>10</span>){
  <span class='co'># When the number of ticks is smaller than s</span>
  <span class='co'># Estimate the future run time</span>
  <span class='co'># as the average of the past</span>
  <span class='kw'>if</span>(<span class='no'>i</span><span class='kw'>&lt;</span><span class='no'>s</span>){
    <span class='no'>eta</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>dtime</span>)*(<span class='no'>n</span>-<span class='no'>i</span>)
  }

  <span class='co'># When the number of ticks is larger than s</span>
  <span class='co'># Fit an arima model every s ticks</span>
  <span class='co'># using forecast package</span>
  <span class='kw'>if</span>(<span class='no'>i</span><span class='kw'>&gt;=</span><span class='no'>s</span>){
    <span class='kw'>if</span>(<span class='no'>i</span> <span class='kw'>%%</span> <span class='no'>s</span> <span class='kw'>==</span><span class='fl'>0</span>){
      <span class='no'>model</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>forecast</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/forecast/man/auto.arima.html'>auto.arima</a></span>(<span class='no'>dtime</span>)
    }
    <span class='no'>runtime</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>forecast</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/forecast/man/forecast.html'>forecast</a></span>(<span class='no'>model</span>, <span class='kw'>h</span><span class='kw'>=</span><span class='no'>n</span>-<span class='no'>i</span>)$<span class='no'>mean</span>
    <span class='kw'>if</span>(<span class='no'>i</span> <span class='kw'>%%</span> <span class='no'>s</span> <span class='kw'>!=</span><span class='fl'>0</span>){
      <span class='no'>runtime</span> <span class='kw'>&lt;-</span> <span class='no'>runtime</span>[-<span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_len</a></span>(<span class='no'>i</span> <span class='kw'>%%</span> <span class='no'>s</span>)]
    }
    <span class='no'>eta</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>runtime</span>)
  }
  <span class='fu'><a href='https://rdrr.io/r/base/function.html'>return</a></span>(<span class='no'>eta</span>)
}

<span class='no'>pb</span> <span class='kw'>&lt;-</span> <span class='fu'>lazyProgressBar</span>(<span class='fl'>10</span>, <span class='kw'>fn</span> <span class='kw'>=</span> <span class='no'>forecast_fn</span>, <span class='kw'>s</span><span class='kw'>=</span><span class='fl'>3</span>)
<span class='kw'>for</span>(<span class='no'>i</span> <span class='kw'>in</span> <span class='fl'>1</span>:<span class='fl'>10</span>){
  <span class='fu'><a href='https://rdrr.io/r/base/Sys.sleep.html'>Sys.sleep</a></span>(<span class='no'>i</span> * <span class='fl'>0.2</span>)
  <span class='no'>pb</span>$<span class='fu'>tick</span>()$<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>()
}
<span class='co'># }</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://yangzhuoranyang.com'>Yangzhuoran Yang</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


